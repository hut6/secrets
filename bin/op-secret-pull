#!/bin/bash

VAULT=6oameu34g6waolpkx4wtrygzkm
FILE=$1
REPOSITORY=$(composer show -s | grep 'name' | head -1 | awk '{print $3 }')

UUID=$(op get item $REPOSITORY/$FILE | jq -r .uuid)
echo "UUID is ${UUID:-not found}"
op get document ${UUID} > $FILE && echo "$FILE pulled" || echo "$FILE failed (empty file)"
