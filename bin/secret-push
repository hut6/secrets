#!/bin/bash

VAULT=6oameu34g6waolpkx4wtrygzkm
FILE=$1
REPOSITORY=$(composer show -s | grep 'name' | head -1 | awk '{print $3 }')
op delete item $(op get item ${REPOSITORY}/${FILE} | jq -r .uuid); op create document ${FILE} --title=${REPOSITORY}/${FILE} --vault=${VAULT} --tags=${REPOSITORY},secrets && echo "$FILE pushed" || echo "$FILE failed"
